<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Conor O'Neill">
    <meta name="description" content="Flash a new name on to your NodeConf EU 2018 badge">
    <title>NodeConf EU 2018 Badge Name Changer</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="//cdn.rawgit.com/necolas/normalize.css/master/normalize.css">
    <link rel="stylesheet" href="//cdn.rawgit.com/milligram/milligram/master/dist/milligram.min.css">
</head>

<body>
    <main class="wrapper">
        <div class="container">
            <div class="row">
                <div class="column">
                    <h1 class="title">NodeConf EU 2018 Badge Name Changer</h1>

                    <ol>
                        <li>Make your Badge Discoverable in its main menu</li>
                        <li>Note the last 4 hex digits of its Bluetooth address</li>
                        <li>Enter a new name below and click "Send to Badge"</li>
                        <li>In the popup that appears, click your Device based on Bluetooth address above</li>
                        <li>Restart your badge</li>
                    </ol>

                    <form id="nameform">
                        <fieldset>
                            <label for="firstname">First Name:</label>
                            <input type="text" id="firstname" placeholder="Bob" name="firstname" />
                            <label for="secondname">Second Name:</label>
                            <input type="text" id="secondname" placeholder="Loblaw" name="secondname" />
                            <input type="button" value="Send to Badge" onclick="newName()">
                        </fieldset>
                    </form>

                    <p>NOTE: There is no visual indication on this page that your name submission was successful. To
                        confirm
                        success, restart the badge and check if the new name has appeared.</p>
                    <script>
                        function newName() {
                            var first = document.getElementById('firstname').value;
                            var second = document.getElementById('secondname').value;

                            var command =
                                "require(\"Storage\").write(\".boot1\", `Badge=global.Badge||{}; Badge.NAME=[\"" +
                                first +
                                "\",\"" +
                                second + "\"];`);" + "\n";

                            Puck.write(command);
                        }
                    </script>
                </div>
            </div>
        </div>
    </main>
    <script src="https://www.puck-js.com/puck.js"></script>

</body>

</html>